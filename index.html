<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BRAND√ÉO BARBER</title>
    <style>
        body { font-family: Arial; background: #0A0A0A; color: white; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        input, select, textarea { width: 100%; padding: 10px; margin: 10px 0; background: #222; border: 1px solid #C0C0C0; color: white; border-radius: 5px; }
        button { background: #C0C0C0; color: black; padding: 15px; border: none; width: 100%; font-size: 18px; cursor: pointer; border-radius: 5px; }
        h1 { text-align: center; color: #C0C0C0; }
        .horario-btn { padding: 10px; margin: 5px; border: none; color: white; cursor: pointer; width: 70px; border-radius: 5px; }
        .disponivel { background: green; }
        .indisponivel { background: red; cursor: not-allowed; }
        .selecionado { background: #C0C0C0 !important; color: black; border: 2px solid white; }
        #horariosContainer { display: flex; flex-wrap: wrap; gap: 5px; margin: 10px 0; }
        .ocupados-local { margin: 20px 0; padding: 10px; background: #222; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚úÇÔ∏è BRAND√ÉO BARBER</h1>
        
        <!-- AVISO SOBRE HOR√ÅRIOS -->
        <div style="background: #333; padding: 10px; border-radius: 5px; margin-bottom: 20px;">
            <p><strong>‚ö†Ô∏è IMPORTANTE:</strong> Os hor√°rios marcados em VERMELHO j√° est√£o ocupados. Escolha apenas os verdes.</p>
        </div>
        
        <!-- LISTA DE HOR√ÅRIOS OCUPADOS (MANUAL) -->
        <div class="ocupados-local">
            <h3>üìÖ HOR√ÅRIOS OCUPADOS HOJE:</h3>
            <div id="listaOcupados"></div>
            <p style="font-size: 12px; color: #999;">‚Üì Clique nos bot√µes verdes para selecionar seu hor√°rio</p>
        </div>
        
        <form id="bookingForm">
            <input type="text" id="nome" placeholder="Seu nome" required>
            <input type="tel" id="whatsapp" placeholder="(91) 99999-9999" required>
            
            <select id="servico" required>
                <option value="">SELECIONE O SERVI√áO</option>
                <option value="Corte">CORTE - R$30</option>
                <option value="Cabelo e Barba">CABELO + BARBA - R$40</option>
                <option value="Barba Completa">BARBA COMPLETA - R$35</option>
                <option value="Combo">COMBO - R$40</option>
            </select>
            
            <input type="date" id="data" required>
            
            <div id="horariosContainer"></div>
            <input type="hidden" id="horarioSelecionado">
            
            <textarea id="observacoes" rows="3" placeholder="Observa√ß√µes (opcional)"></textarea>
            
            <button type="submit">‚úÖ CONFIRMAR AGENDAMENTO</button>
        </form>
        
        <div style="margin-top: 30px; text-align: center;">
            <a href="https://wa.me/5591985601098" target="_blank" style="background: #25D366; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block;">üì± WhatsApp</a>
        </div>
    </div>

    <script>
        // ============================================
        // SISTEMA DE HOR√ÅRIOS COMPARTILHADOS (MANUAL)
        // ============================================
        
        // üî¥ HOR√ÅRIOS OCUPADOS - COLOQUE AQUI MANUALMENTE
        // Quando algu√©m agendar, voc√™ adiciona o hor√°rio aqui
        let horariosOcupados = [
            // EXEMPLO: '10:00', '15:30'
            // Depois que algu√©m agendar, voc√™ coloca aqui
        ];
        
        // Hor√°rios dispon√≠veis
        const horariosFixos = [
            '09:00', '09:30', '10:00', '10:30', '11:00',
            '15:00', '15:30', '16:00', '16:30', '17:00',
            '17:30', '18:00', '18:30', '19:00', '19:30', '20:00'
        ];
        
        // Atualizar lista na tela
        function atualizarListaOcupados() {
            const lista = document.getElementById('listaOcupados');
            if (horariosOcupados.length === 0) {
                lista.innerHTML = '<p style="color: green;">‚úÖ Todos os hor√°rios est√£o dispon√≠veis!</p>';
            } else {
                lista.innerHTML = '<p style="color: red;">üî¥ ' + horariosOcupados.join(' ‚Ä¢ ') + '</p>';
            }
        }
        
        // Carregar hor√°rios na tela
        function carregarHorarios() {
            const container = document.getElementById('horariosContainer');
            const data = document.getElementById('data').value;
            
            if (!data) return;
            
            container.innerHTML = horariosFixos.map(horario => {
                const ocupado = horariosOcupados.includes(horario);
                return `<button type="button" class="horario-btn ${ocupado ? 'indisponivel' : 'disponivel'}" 
                    data-horario="${horario}" ${ocupado ? 'disabled' : ''}>${horario}</button>`;
            }).join('');
            
            document.querySelectorAll('.horario-btn.disponivel').forEach(btn => {
                btn.onclick = function() {
                    document.querySelectorAll('.horario-btn').forEach(b => b.classList.remove('selecionado'));
                    this.classList.add('selecionado');
                    document.getElementById('horarioSelecionado').value = this.dataset.horario;
                };
            });
            
            atualizarListaOcupados();
        }
        
        // ============================================
        // FORMSPREE - ENVIO DO FORMUL√ÅRIO
        // ============================================
        
        // üî¥ COLE SEU LINK DO FORMSPREE AQUI
        const FORMSPREE_URL = 'https://formspree.io/f/xlgwwggq'; // SUBSTITUA!
        
        document.getElementById('bookingForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const horario = document.getElementById('horarioSelecionado').value;
            if (!horario) {
                alert('‚ùå Selecione um hor√°rio!');
                return;
            }
            
            // Verificar se j√° est√° ocupado (dupla verifica√ß√£o)
            if (horariosOcupados.includes(horario)) {
                alert('‚è∞ Este hor√°rio foi ocupado! Escolha outro.');
                carregarHorarios();
                return;
            }
            
            const dados = {
                nome: document.getElementById('nome').value,
                whatsapp: document.getElementById('whatsapp').value,
                servico: document.getElementById('servico').value,
                data: document.getElementById('data').value,
                horario: horario,
                observacoes: document.getElementById('observacoes').value
            };
            
            try {
                // Enviar para o Formspree
                await fetch(FORMSPREE_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(dados)
                });
                
                // ADICIONAR O HOR√ÅRIO √Ä LISTA DE OCUPADOS
                horariosOcupados.push(horario);
                
                // Abrir WhatsApp
                const dataFormatada = new Date(dados.data).toLocaleDateString('pt-BR');
                const mensagem = `ü™í NOVO AGENDAMENTO ü™í%0A%0Aüë§ Cliente: ${dados.nome}%0Aüìû WhatsApp: ${dados.whatsapp}%0Aüíà Servi√ßo: ${dados.servico}%0AüìÖ Data: ${dataFormatada}%0A‚è∞ Hor√°rio: ${dados.horario}`;
                window.open(`https://wa.me/5591985601098?text=${mensagem}`, '_blank');
                
                alert('‚úÖ Agendamento confirmado! O hor√°rio ficar√° vermelho para os pr√≥ximos clientes.');
                
                // Limpar formul√°rio
                e.target.reset();
                document.getElementById('horarioSelecionado').value = '';
                document.getElementById('data').value = new Date().toISOString().split('T')[0];
                
                // Recarregar hor√°rios
                carregarHorarios();
                
            } catch (error) {
                alert('Erro ao agendar. Tente novamente.');
            }
        });
        
        // Inicializar
        document.getElementById('data').value = new Date().toISOString().split('T')[0];
        carregarHorarios();
    </script>
</body>
</html>
